<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>AR Test</title>
        
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

        <style>
            body {
                overflow: hidden;
                margin: 0px;
            }
        </style>
    </head>

    <body>

        <video style="display:none;" id="video" width="500" height="100"></video>
        <script type="module" src="bundle.js"></script>

        <!-- <<a-scene vr-mode-ui="enabled: false" arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;">
        <a-camera gps-camera rotation-reader></a-camera>
        </a-scene>

        <button id="find-me">Show my location</button><br />
        <p id="status"></p>
        <a id="map-link" target="_blank"></a>

        <script>
        function geoFindMe()
        {
            const status = document.querySelector('#status')
            const mapLink = document.querySelector('#map-link')

            mapLink.href = '';
            mapLink.textContent = '';

            function success(position)
            {
                const latitude = position.coords.latitude
                const longitude = position.coords.longitude
                const altitude = position.coords.altitude
                const accuracy = position.coords.accuracy
                const altAccuracy = position.coords.altitudeAccuracy
                const heading = position.coords.heading
                const speed = position.coords.speed
            
                status.textContent = ''
                //https://www.google.ca/maps/place/51%C2%B004'45.9%22N+114%C2%B007'57.6%22W/
                //https://maps.google.com/?q=<lat>,<lng>
                //51.0794157 degrees, Longitude: -114.1326607 degrees 
                //mapLink.href = 'https://maps.google.com/?q=${latitude},${longitude}'
                //mapLink.textContent='Click here'
                
                document.write('Latitude: ')
                document.write(latitude)
                document.write(' degrees, ')

                document.write('Longitude: ')
                document.write(longitude)
                document.write(' degrees, ')

                document.write('Altitude: ')
                document.write(altitude)
                document.write(' meters, ')

                document.write('Speed: ')
                document.write(speed)
                document.write(' m/s, ')

                document.write('Heading: ')
                document.write(heading)
                document.write(' degrees clockwise from due north')
                
                //document.write(<a href='https://www.openstreetmap.org/#map=18/${latitude}/${longitude}'> Click me </a>)
            } 

            function error() 
            {
                status.textContent = 'Unable to retrieve your location'
            }

            if (!navigator.geolocation)
            {
                status.textContent = 'Geolocation is not supported by your browser'
            }
            else
            {
                status.textContent = 'Locating...'
                navigator.geolocation.getCurrentPosition(success, error)
            }
        }

        document.querySelector('#find-me').addEventListener('click', geoFindMe)
        </script>


        <script>
            const constraints = {
                audio: false,
                video: { width: 1280, height: 720, facingMode: "environment" }
            }

            navigator.mediaDevices.getUserMedia(constraints).then((mediaStream) => {
                const video = document.querySelector('video')
                video.srcObject = mediaStream
                video.onloadedmetadata = () => {
                    video.play()
                }
            }).catch((err) => {
                console.error('${err.name}: ${err.message}')
            })
        </script>

        <canvas id="canvas" width="500" height="500"></canvas>

        <script>
            const canvas = document.querySelector("canvas")
            const ctx = canvas.getContext("2d")
            var video = document.querySelector("video")
            //ctx.fillStyle = '#000000'
            //ctx.fillRect(0, 0, 500, 500)
            video.addEventListener('loadeddata', function() {
                //video.play()
                ctx.drawImage(video, 1000, 0, 500, 500)
            })
        </script>
        -->

    </body>
</html>